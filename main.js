(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameUser=document.querySelector(e),this._aboutUser=document.querySelector(n),this._avatarUser=document.querySelector(r)}var n,r;return n=t,(r=[{key:"getUserInfo",value:function(){return{name:this._nameUser.textContent,about:this._aboutUser.textContent}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about;this._nameUser.textContent=e,this._aboutUser.textContent=n}},{key:"setAvatar",value:function(t){this._avatarUser.src=t}},{key:"setUserId",value:function(t){this._userId=t}},{key:"getUserId",value:function(){return this._userId}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function i(t,e,n){return(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===r(e)?e:String(e)}var a=function(){function t(e,n){var r=this,o=e.data,u=e.userId,a=e.handleCardClick,c=e.handleTrashClick,l=e.handleLikeClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"_addLike",(function(){r._elementLike.classList.add("elements__like_active"),r._isLiked=!0,r._elementLikeCounter.textContent=r._likeCounter})),i(this,"_removeLike",(function(){r._elementLike.classList.remove("elements__like_active"),r._isLiked=!1,r._elementLikeCounter.textContent=r._likeCounter})),i(this,"_setLikesCounter",(function(t){r._likeCounter=t.likes.length})),i(this,"_removeCard",(function(){r._element.remove(),r._element=null})),i(this,"_handleCardImageClick",(function(){r._handleCardClick({name:r._name,link:r._link})})),i(this,"_handleTrashImageClick",(function(){r._handleTrashClick(r._cardId,r._removeCard)})),i(this,"_handleLikeImageClick",(function(){r._handleLikeClick(r._cardId,r._isLiked,r._addLike,r._removeLike,r._setLikesCounter)})),this._name=o.name,this._link=o.link,this._cardId=o._id,this._userId=u,this._ownerId=o.owner._id,this._isLiked=o.likes.some((function(t){return t._id===r._userId})),this._likeCounter=o.likes.length,this._templateSelector=n,this._handleCardClick=a,this._handleTrashClick=c,this._handleLikeClick=l,this._element=this._getTemplate(),this._elementTitle=this._element.querySelector(".elements__title"),this._elementPhoto=this._element.querySelector(".elements__photo"),this._elementLikeCounter=this._element.querySelector(".elements__like-counter"),this._elementTrash=this._element.querySelector(".elements__trash"),this._elementLike=this._element.querySelector(".elements__like")}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".elements__item").cloneNode(!0)}},{key:"_hasHiddenTrashBtn",value:function(){this._userId!==this._ownerId&&this._elementTrash.remove()}},{key:"_setEventListeners",value:function(){this._elementPhoto.addEventListener("click",this._handleCardImageClick),this._elementTrash.addEventListener("click",this._handleTrashImageClick),this._elementLike.addEventListener("click",this._handleLikeImageClick)}},{key:"generateCard",value:function(){return this._elementTitle.textContent=this._name,this._elementPhoto.alt=this._name,this._elementPhoto.src=this._link,this._elementLikeCounter.textContent=this._likeCounter,this._hasHiddenTrashBtn(),this._isLiked&&this._addLike(),this._setEventListeners(),this._element}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}var s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(t){var e=this;t.reverse().forEach((function(t){e.addItem(e._renderer(t))}))}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function h(t,e,n){return(e=y(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===f(e)?e:String(e)}var m=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"_handleEscClose",(function(t){"Escape"===t.key&&n.close()})),h(this,"_handleOverlayClick",(function(t){t.target!==n._popup&&t.target!==n._closeButton||n.close()})),this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".popup__close")}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),this._popup.addEventListener("mousedown",this._handleOverlayClick)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),this._popup.removeEventListener("mousedown",this._handleOverlayClick)}},{key:"setEventListeners",value:function(){var t=this;this._closeButton.addEventListener("click",(function(){t.close()}))}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},d.apply(this,arguments)}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=k(r);if(o){var n=k(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupImage=e._popup.querySelector(".popup__photo"),e._popupCaption=e._popup.querySelector(".popup__photo-caption"),e}return e=u,(n=[{key:"open",value:function(t){var e=t.name,n=t.link;this._popupImage.src=n,this._popupImage.alt=e,this._popupCaption.textContent=e,d(k(u.prototype),"open",this).call(this)}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(m);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==g(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===g(o)?o:String(o)),r)}var o}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},E.apply(this,arguments)}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=O(r);if(o){var n=O(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._submitFormCallback=e,n._popupForm=n._popup.querySelector(".popup__form"),n._inputList=n._popup.querySelectorAll(".popup__input"),n._buttonForm=n._popup.querySelector(".popup__button-save"),n._buttonFormText=n._buttonForm.textContent,n}return e=u,(n=[{key:"_getInputValues",value:function(){var t={};return this._inputList.forEach((function(e){t[e.name]=e.value})),t}},{key:"setInputValues",value:function(t){this._inputList.forEach((function(e){e.value=t[e.name]}))}},{key:"setEventListeners",value:function(){var t=this;E(O(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._submitFormCallback(t._getInputValues())}))}},{key:"setSaveButtonText",value:function(t){this._buttonForm.textContent=t?"Сохранение...":this._buttonFormText}},{key:"close",value:function(){E(O(u.prototype),"close",this).call(this),this._popupForm.reset()}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(m);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===L(o)?o:String(o)),r)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(r);if(o){var n=x(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._submitFormCallback=e,n._popupForm=n._popup.querySelector(".popup__form"),n._buttonForm=n._popup.querySelector(".popup__button-save"),n._buttonFormText=n._buttonForm.textContent,n}return e=u,(n=[{key:"submitCallback",value:function(t){this._submitFormCallback=t}},{key:"setEventListeners",value:function(){var t=this;I(x(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("click",(function(e){e.preventDefault(),t._submitFormCallback()}))}},{key:"setSaveButtonText",value:function(t){this._buttonForm.textContent=t?"Удаление...":this._buttonFormText}}])&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(m);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==U(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===U(o)?o:String(o)),r)}var o}var q=function(){function t(e){var n=e.baseUrl,r=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._headers=r}var e,n;return e=t,(n=[{key:"_checkResponse",value:function(t){if(t.ok)return t.json();Promise.reject("Ошибка: ".concat(t.status))}},{key:"getItems",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"setItem",value:function(t){var e=this,n=t.name,r=t.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:n,link:r})}).then((function(t){return e._checkResponse(t)}))}},{key:"deleteItem",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"addLike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"deleteLike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"editAvatar",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((function(t){return e._checkResponse(t)}))}},{key:"getUserInfo",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"setUserInfo",value:function(t){var e=this,n=t.name,r=t.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:n,about:r})}).then((function(t){return e._checkResponse(t)}))}}])&&B(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==F(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===F(o)?o:String(o)),r)}var o}var D=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=n.querySelector(this._submitButtonSelector),this._formInputsHandler=this._formInputsHandler.bind(this)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_formInputsHandler",value:function(t){t.target.matches(this._inputSelector)&&(this._checkInputValidity(t.target),this._toggleButtonState())}},{key:"_toggleButtonState",value:function(){var t=this._inputList.some((function(t){return!t.validity.valid}));this._buttonElement.disabled=t,this._buttonElement.classList.toggle(this._inactiveButtonClass,t)}},{key:"_resetFormHandler",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e)})),this._toggleButtonState()}},{key:"_setEventListeners",value:function(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._formElement.addEventListener("input",this._formInputsHandler),this._formElement.addEventListener("reset",this._resetFormHandler.bind(this)),this._toggleButtonState()}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"resetErrors",value:function(){this._resetFormHandler()}}])&&A(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),H=document.querySelector(".profile__avatar-block"),V=document.querySelector(".profile__button-edit"),N=document.querySelector(".profile__button-add-item");function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var M=new q({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-63/",headers:{authorization:"53225a79-808c-4502-af98-76089dda326c","Content-Type":"application/json"}}),z=new S(".popup_item_photo-view");z.setEventListeners();var $=new n(".profile__name",".profile__about",".profile__avatar"),G=function(t){return console.log("Ошибка: ".concat(t))};Promise.all([M.getUserInfo(),M.getItems()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1],u=o.name,a=o.about,c=o.avatar,l=o._id;$.setUserInfo({name:u,about:a}),$.setAvatar(c),$.setUserId(l),Q.renderItems(i)})).catch(G);var K=function(t){var e=$.getUserId(),n=new a({data:t,userId:e,handleCardClick:function(t,e){z.open(t,e)},handleTrashClick:function(t,e){Y.open(),Y.submitCallback((function(){Y.setSaveButtonText(!0),M.deleteItem(t).then((function(){e(),Y.close()})).catch(G).finally((function(){Y.setSaveButtonText(!1)}))}))},handleLikeClick:function(t,e,n,r,o){e?M.deleteLike(t).then((function(t){o(t),r()})).catch(G):M.addLike(t).then((function(t){o(t),n()})).catch(G)}},"#card-template").generateCard();return n},Q=new s(K,".elements__cards"),W=new j(".popup_edit",(function(t){W.setSaveButtonText(!0),M.setUserInfo(t).then((function(t){$.setUserInfo({name:t.name,about:t.about}),W.close()})).catch(G).finally((function(){W.setSaveButtonText(!1)}))}));W.setEventListeners();var X=new j(".popup_item",(function(t){X.setSaveButtonText(!0),M.setItem({name:t.title,link:t.url}).then((function(t){Q.addItem(K(t)),X.close()})).catch(G).finally((function(){X.setSaveButtonText(!1)}))}));X.setEventListeners();var Y=new R(".popup_item_delete-card");Y.setEventListeners();var Z=new j(".popup_edit-avatar",(function(t){var e=t.data;Z.setSaveButtonText(!0),M.editAvatar(e).then((function(t){$.setAvatar(t.avatar),Z.close()})).catch(G).finally((function(){Z.setSaveButtonText(!1)}))}));Z.setEventListeners();var tt=function(t){var e=document.querySelectorAll(t.formSelector),n={};return e.forEach((function(e){var r=new D(t,e);n[e.getAttribute("name")]=r,r.enableValidation(t)})),n}({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button-save",inactiveButtonClass:"popup__button-save_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"});N.addEventListener("click",(function(){tt.itemAdd.resetErrors(),X.open()})),V.addEventListener("click",(function(){W.setInputValues($.getUserInfo()),tt.editProfile.resetErrors(),W.open()})),H.addEventListener("click",(function(){tt.avatarEdit.resetErrors(),Z.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiMHJCQUFxQkEsRUFBUSxXQUMzQixTQUFBQSxFQUFZQyxFQUFjQyxFQUFjQyxJLDRGQUFnQkMsQ0FBQSxLQUFBSixHQUN0REssS0FBS0MsVUFBWUMsU0FBU0MsY0FBY1AsR0FDeENJLEtBQUtJLFdBQWFGLFNBQVNDLGNBQWNOLEdBQ3pDRyxLQUFLSyxZQUFjSCxTQUFTQyxjQUFjTCxFQUM1QyxDLFFBeUJDLE8sRUF6QkFILEcsRUFBQSxFQUFBVyxJQUFBLGNBQUFDLE1BRUQsV0FDRSxNQUFPLENBQ0xDLEtBQU1SLEtBQUtDLFVBQVVRLFlBQ3JCQyxNQUFPVixLQUFLSSxXQUFXSyxZQUUzQixHQUFDLENBQUFILElBQUEsY0FBQUMsTUFFRCxTQUFBSSxHQUE2QixJQUFmSCxFQUFJRyxFQUFKSCxLQUFNRSxFQUFLQyxFQUFMRCxNQUNsQlYsS0FBS0MsVUFBVVEsWUFBY0QsRUFDN0JSLEtBQUtJLFdBQVdLLFlBQWNDLENBQ2hDLEdBQUMsQ0FBQUosSUFBQSxZQUFBQyxNQUVELFNBQVVLLEdBQ1JaLEtBQUtLLFlBQVlRLElBQU1ELENBQ3pCLEdBQUMsQ0FBQU4sSUFBQSxZQUFBQyxNQUdELFNBQVVPLEdBQ1JkLEtBQUtlLFFBQVVELENBQ2pCLEdBQUMsQ0FBQVIsSUFBQSxZQUFBQyxNQUVELFdBQ0UsT0FBT1AsS0FBS2UsT0FDZCxNLG9FQUFDcEIsQ0FBQSxDQTlCMEIsRyxtekJDQVJxQixFQUFJLFdBQ3ZCLFNBQUFBLEVBQUFMLEVBQWtGTSxHQUFrQixJQUFBQyxFQUFBLEtBQXRGQyxFQUFJUixFQUFKUSxLQUFNQyxFQUFNVCxFQUFOUyxPQUFRQyxFQUFlVixFQUFmVSxnQkFBaUJDLEVBQWdCWCxFQUFoQlcsaUJBQWtCQyxFQUFlWixFQUFmWSxpQiw0RkFBZXhCLENBQUEsS0FBQWlCLEdBQUFRLEVBQUEsaUJBbUNuRSxXQUNUTixFQUFLTyxhQUFhQyxVQUFVQyxJQUFJLHlCQUNoQ1QsRUFBS1UsVUFBVyxFQUNoQlYsRUFBS1csb0JBQW9CcEIsWUFBY1MsRUFBS1ksWUFDOUMsSUFBQ04sRUFBQSxvQkFFYSxXQUNaTixFQUFLTyxhQUFhQyxVQUFVSyxPQUFPLHlCQUNuQ2IsRUFBS1UsVUFBVyxFQUNoQlYsRUFBS1csb0JBQW9CcEIsWUFBY1MsRUFBS1ksWUFDOUMsSUFBQ04sRUFBQSx5QkFFa0IsU0FBQ0wsR0FDbEJELEVBQUtZLGFBQWVYLEVBQUthLE1BQU1DLE1BQ2pDLElBQUNULEVBQUEsb0JBRWEsV0FDWk4sRUFBS2dCLFNBQVNILFNBQ2RiLEVBQUtnQixTQUFXLElBQ2xCLElBQUNWLEVBQUEsOEJBRXVCLFdBQ3RCTixFQUFLaUIsaUJBQWlCLENBQUUzQixLQUFNVSxFQUFLa0IsTUFBT0MsS0FBTW5CLEVBQUtvQixPQUN2RCxJQUFDZCxFQUFBLCtCQUV3QixXQUN2Qk4sRUFBS3FCLGtCQUNIckIsRUFBS3NCLFFBQ0x0QixFQUFLdUIsWUFFVCxJQUFDakIsRUFBQSw4QkFFdUIsV0FDdEJOLEVBQUt3QixpQkFDSHhCLEVBQUtzQixRQUNMdEIsRUFBS1UsU0FDTFYsRUFBS3lCLFNBQ0x6QixFQUFLMEIsWUFDTDFCLEVBQUsyQixpQkFFVCxJQTFFRTdDLEtBQUtvQyxNQUFRakIsRUFBS1gsS0FDbEJSLEtBQUtzQyxNQUFRbkIsRUFBS2tCLEtBQ2xCckMsS0FBS3dDLFFBQVVyQixFQUFLTCxJQUNwQmQsS0FBS2UsUUFBVUssRUFDZnBCLEtBQUs4QyxTQUFXM0IsRUFBSzRCLE1BQU1qQyxJQUMzQmQsS0FBSzRCLFNBQVdULEVBQUthLE1BQU1nQixNQUFLLFNBQUNDLEdBQUksT0FBS0EsRUFBS25DLE1BQVFJLEVBQUtILE9BQU8sSUFDbkVmLEtBQUs4QixhQUFlWCxFQUFLYSxNQUFNQyxPQUMvQmpDLEtBQUtrRCxrQkFBb0JqQyxFQUN6QmpCLEtBQUttQyxpQkFBbUJkLEVBQ3hCckIsS0FBS3VDLGtCQUFvQmpCLEVBQ3pCdEIsS0FBSzBDLGlCQUFtQm5CLEVBQ3hCdkIsS0FBS2tDLFNBQVdsQyxLQUFLbUQsZUFDckJuRCxLQUFLb0QsY0FBZ0JwRCxLQUFLa0MsU0FBUy9CLGNBQWMsb0JBQ2pESCxLQUFLcUQsY0FBZ0JyRCxLQUFLa0MsU0FBUy9CLGNBQWMsb0JBQ2pESCxLQUFLNkIsb0JBQXNCN0IsS0FBS2tDLFNBQVMvQixjQUFjLDJCQUN2REgsS0FBS3NELGNBQWdCdEQsS0FBS2tDLFNBQVMvQixjQUFjLG9CQUNqREgsS0FBS3lCLGFBQWV6QixLQUFLa0MsU0FBUy9CLGNBQWMsa0JBRWxELEMsUUE4RUMsTyxFQTlFQWEsRyxFQUFBLEVBQUFWLElBQUEsZUFBQUMsTUFFRCxXQUNFLE9BQU9MLFNBQ0pDLGNBQWNILEtBQUtrRCxtQkFDbkJLLFFBQ0FwRCxjQUFjLG1CQUNkcUQsV0FBVSxFQUNmLEdBQUMsQ0FBQWxELElBQUEscUJBQUFDLE1BRUQsV0FDTVAsS0FBS2UsVUFBWWYsS0FBSzhDLFVBQ3hCOUMsS0FBS3NELGNBQWN2QixRQUV2QixHQUFDLENBQUF6QixJQUFBLHFCQUFBQyxNQTRDRCxXQUNFUCxLQUFLcUQsY0FBY0ksaUJBQWlCLFFBQVN6RCxLQUFLMEQsdUJBQ2xEMUQsS0FBS3NELGNBQWNHLGlCQUFpQixRQUFTekQsS0FBSzJELHdCQUNsRDNELEtBQUt5QixhQUFhZ0MsaUJBQWlCLFFBQVN6RCxLQUFLNEQsc0JBRW5ELEdBQUMsQ0FBQXRELElBQUEsZUFBQUMsTUFFRCxXQVlFLE9BWEFQLEtBQUtvRCxjQUFjM0MsWUFBY1QsS0FBS29DLE1BQ3RDcEMsS0FBS3FELGNBQWNRLElBQU03RCxLQUFLb0MsTUFDOUJwQyxLQUFLcUQsY0FBY3hDLElBQU1iLEtBQUtzQyxNQUM5QnRDLEtBQUs2QixvQkFBb0JwQixZQUFjVCxLQUFLOEIsYUFDNUM5QixLQUFLOEQscUJBRUQ5RCxLQUFLNEIsVUFDUDVCLEtBQUsyQyxXQUVQM0MsS0FBSytELHFCQUVFL0QsS0FBS2tDLFFBQ2QsTSxvRUFBQ2xCLENBQUEsQ0FsR3NCLEcsdXFCQ0FKZ0QsRUFBTyxXQUMxQixTQUFBQSxFQUFZQyxFQUFVQyxJLDRGQUFtQm5FLENBQUEsS0FBQWlFLEdBQ3ZDaEUsS0FBS21FLFVBQVlGLEVBQ2pCakUsS0FBS29FLFdBQWFsRSxTQUFTQyxjQUFjK0QsRUFDM0MsQyxRQVdDLE8sRUFYQUYsRyxFQUFBLEVBQUExRCxJQUFBLFVBQUFDLE1BR0QsU0FBUThELEdBQ05yRSxLQUFLb0UsV0FBV0UsUUFBUUQsRUFDMUIsR0FBQyxDQUFBL0QsSUFBQSxjQUFBQyxNQUVELFNBQVlnRSxHQUFhLElBQUFyRCxFQUFBLEtBQ3ZCcUQsRUFBWUMsVUFBVUMsU0FBUSxTQUFDSixHQUM3Qm5ELEVBQUt3RCxRQUFReEQsRUFBS2lELFVBQVVFLEdBQzlCLEdBQ0YsTSxvRUFBQ0wsQ0FBQSxDQWZ5QixHLG16QkNBUFcsRUFBSyxXQUN4QixTQUFBQSxFQUFZQyxHQUFlLElBQUExRCxFQUFBLE0sNEZBQUFuQixDQUFBLEtBQUE0RSxHQUFBbkQsRUFBQSx3QkFpQlQsU0FBQ3FELEdBQ0QsV0FBWkEsRUFBSXZFLEtBQ05ZLEVBQUs0RCxPQUVULElBQUN0RCxFQUFBLDRCQUVxQixTQUFDcUQsR0FFbkJBLEVBQUlFLFNBQVc3RCxFQUFLOEQsUUFDcEJILEVBQUlFLFNBQVc3RCxFQUFLK0QsY0FFcEIvRCxFQUFLNEQsT0FFVCxJQTdCRTlFLEtBQUtnRixPQUFTOUUsU0FBU0MsY0FBY3lFLEdBQ3JDNUUsS0FBS2lGLGFBQWVqRixLQUFLZ0YsT0FBTzdFLGNBQWMsZ0JBQ2hELEMsUUFpQ0MsTyxFQWpDQXdFLEcsRUFBQSxFQUFBckUsSUFBQSxPQUFBQyxNQUVELFdBQ0VQLEtBQUtnRixPQUFPdEQsVUFBVUMsSUFBSSxnQkFDMUJ6QixTQUFTdUQsaUJBQWlCLFVBQVd6RCxLQUFLa0YsaUJBQzFDbEYsS0FBS2dGLE9BQU92QixpQkFBaUIsWUFBYXpELEtBQUttRixvQkFDakQsR0FBQyxDQUFBN0UsSUFBQSxRQUFBQyxNQUVELFdBQ0VQLEtBQUtnRixPQUFPdEQsVUFBVUssT0FBTyxnQkFDN0I3QixTQUFTa0Ysb0JBQW9CLFVBQVdwRixLQUFLa0YsaUJBQzdDbEYsS0FBS2dGLE9BQU9JLG9CQUFvQixZQUFhcEYsS0FBS21GLG9CQUNwRCxHQUFDLENBQUE3RSxJQUFBLG9CQUFBQyxNQWlCRCxXQUFvQixJQUFBOEUsRUFBQSxLQUNsQnJGLEtBQUtpRixhQUFheEIsaUJBQWlCLFNBQVMsV0FDMUM0QixFQUFLUCxPQUNQLEdBQ0YsTSxvRUFBQ0gsQ0FBQSxDQXJDdUIsRyxndkNDQUssSUFFVlcsRUFBYyxTQUFBQyxJLHFSQUFBQyxDQUFBRixFQUFBQyxHQUFBLEksUUFBQUUsRyxFQUFBSCxFLHFyQkFDakMsU0FBQUEsRUFBWVYsR0FBZSxJQUFBMUQsRUFHK0MsTyw0RkFIL0NuQixDQUFBLEtBQUF1RixJQUN6QnBFLEVBQUF1RSxFQUFBQyxLQUFBLEtBQU1kLElBQ0RlLFlBQWN6RSxFQUFLOEQsT0FBTzdFLGNBQWMsaUJBQzdDZSxFQUFLMEUsY0FBZ0IxRSxFQUFLOEQsT0FBTzdFLGNBQWMseUJBQXlCZSxDQUMxRSxDQU9DLE8sRUFQQW9FLEcsRUFBQSxFQUFBaEYsSUFBQSxPQUFBQyxNQUVELFNBQUFJLEdBQXFCLElBQWRILEVBQUlHLEVBQUpILEtBQU02QixFQUFJMUIsRUFBSjBCLEtBQ1hyQyxLQUFLMkYsWUFBWTlFLElBQU13QixFQUN2QnJDLEtBQUsyRixZQUFZOUIsSUFBTXJELEVBQ3ZCUixLQUFLNEYsY0FBY25GLFlBQWNELEVBQ2pDcUYsRUFBQUMsRUFBQVIsRUFBQVMsV0FBQSxhQUFBTCxLQUFBLEtBQ0YsTSxvRUFBQ0osQ0FBQSxDQVpnQyxDQUFTWCxHLGd2Q0NGYixJQUVWcUIsRUFBYSxTQUFBVCxJLHFSQUFBQyxDQUFBUSxFQUFBVCxHQUFBLEksUUFBQUUsRyxFQUFBTyxFLHFyQkFDaEMsU0FBQUEsRUFBWXBCLEVBQWVxQixHQUFvQixJQUFBL0UsRUFNTyxPLDRGQU5QbkIsQ0FBQSxLQUFBaUcsSUFDN0M5RSxFQUFBdUUsRUFBQUMsS0FBQSxLQUFNZCxJQUNEc0Isb0JBQXNCRCxFQUMzQi9FLEVBQUtpRixXQUFhakYsRUFBSzhELE9BQU83RSxjQUFjLGdCQUM1Q2UsRUFBS2tGLFdBQWFsRixFQUFLOEQsT0FBT3FCLGlCQUFpQixpQkFDL0NuRixFQUFLb0YsWUFBY3BGLEVBQUs4RCxPQUFPN0UsY0FBYyx1QkFDN0NlLEVBQUtxRixnQkFBa0JyRixFQUFLb0YsWUFBWTdGLFlBQVlTLENBQ3RELENBbUNDLE8sRUFuQ0E4RSxHLEVBQUEsRUFBQTFGLElBQUEsa0JBQUFDLE1BRUQsV0FDRSxJQUFNaUcsRUFBYSxDQUFDLEVBSXBCLE9BSEF4RyxLQUFLb0csV0FBVzNCLFNBQVEsU0FBQWdDLEdBQ3RCRCxFQUFXQyxFQUFNakcsTUFBUWlHLEVBQU1sRyxLQUNqQyxJQUNPaUcsQ0FDVCxHQUFDLENBQUFsRyxJQUFBLGlCQUFBQyxNQUVELFNBQWVZLEdBQ2JuQixLQUFLb0csV0FBVzNCLFNBQVEsU0FBQWdDLEdBQ3RCQSxFQUFNbEcsTUFBUVksRUFBS3NGLEVBQU1qRyxLQUMzQixHQUNGLEdBQUMsQ0FBQUYsSUFBQSxvQkFBQUMsTUFFRCxXQUFvQixJQUFBOEUsRUFBQSxLQUNsQlEsRUFBQUMsRUFBQUUsRUFBQUQsV0FBQSwwQkFBQUwsS0FBQSxNQUNBMUYsS0FBS21HLFdBQVcxQyxpQkFBaUIsVUFBVSxTQUFDb0IsR0FDMUNBLEVBQUk2QixpQkFDSnJCLEVBQUthLG9CQUFvQmIsRUFBS3NCLGtCQUNoQyxHQUNGLEdBQUMsQ0FBQXJHLElBQUEsb0JBQUFDLE1BRUQsU0FBa0JxRyxHQUVaNUcsS0FBS3NHLFlBQVk3RixZQURqQm1HLEVBQytCLGdCQUVBNUcsS0FBS3VHLGVBRTFDLEdBQUMsQ0FBQWpHLElBQUEsUUFBQUMsTUFFRCxXQUNFc0YsRUFBQUMsRUFBQUUsRUFBQUQsV0FBQSxjQUFBTCxLQUFBLE1BQ0ExRixLQUFLbUcsV0FBV1UsT0FDbEIsTSxvRUFBQ2IsQ0FBQSxDQTNDK0IsQ0FBU3JCLEcsZ3ZDQ0ZaLElBRVZtQyxFQUFxQixTQUFBdkIsSSxxUkFBQUMsQ0FBQXNCLEVBQUF2QixHQUFBLEksUUFBQUUsRyxFQUFBcUIsRSxxckJBQ3hDLFNBQUFBLEVBQVlsQyxFQUFlcUIsR0FBb0IsSUFBQS9FLEVBS08sTyw0RkFMUG5CLENBQUEsS0FBQStHLElBQzdDNUYsRUFBQXVFLEVBQUFDLEtBQUEsS0FBTWQsSUFDRHNCLG9CQUFzQkQsRUFDM0IvRSxFQUFLaUYsV0FBYWpGLEVBQUs4RCxPQUFPN0UsY0FBYyxnQkFDNUNlLEVBQUtvRixZQUFjcEYsRUFBSzhELE9BQU83RSxjQUFjLHVCQUM3Q2UsRUFBS3FGLGdCQUFrQnJGLEVBQUtvRixZQUFZN0YsWUFBWVMsQ0FDdEQsQ0FvQkMsTyxFQXBCQTRGLEcsRUFBQSxFQUFBeEcsSUFBQSxpQkFBQUMsTUFFRCxTQUFld0csR0FDYi9HLEtBQUtrRyxvQkFBc0JhLENBQzdCLEdBQUMsQ0FBQXpHLElBQUEsb0JBQUFDLE1BRUQsV0FBb0IsSUFBQThFLEVBQUEsS0FDbEJRLEVBQUFDLEVBQUFnQixFQUFBZixXQUFBLDBCQUFBTCxLQUFBLE1BQ0ExRixLQUFLbUcsV0FBVzFDLGlCQUFpQixTQUFTLFNBQUNvQixHQUN6Q0EsRUFBSTZCLGlCQUNKckIsRUFBS2EscUJBQ1AsR0FDRixHQUFDLENBQUE1RixJQUFBLG9CQUFBQyxNQUVELFNBQWtCcUcsR0FFWjVHLEtBQUtzRyxZQUFZN0YsWUFEakJtRyxFQUMrQixjQUVBNUcsS0FBS3VHLGVBRTFDLE0sb0VBQUNPLENBQUEsQ0EzQnVDLENBQVNuQyxHLHVxQkNGOUJxQyxFQUFHLFdBQ3RCLFNBQUFBLEVBQUFyRyxHQUFrQyxJQUFwQnNHLEVBQU90RyxFQUFQc0csUUFBU0MsRUFBT3ZHLEVBQVB1RyxTLDRGQUFPbkgsQ0FBQSxLQUFBaUgsR0FDNUJoSCxLQUFLbUgsU0FBV0YsRUFDaEJqSCxLQUFLb0gsU0FBV0YsQ0FDbEIsQyxRQStEQyxPLEVBL0RBRixHLEVBQUEsRUFBQTFHLElBQUEsaUJBQUFDLE1BRUQsU0FBZThHLEdBQ2IsR0FBSUEsRUFBSUMsR0FDTixPQUFPRCxFQUFJRSxPQUVYQyxRQUFRQyxPQUFPLFdBQURDLE9BQVlMLEVBQUlNLFFBRWxDLEdBQUMsQ0FBQXJILElBQUEsV0FBQUMsTUFFRCxXQUFXLElBQUFXLEVBQUEsS0FDVCxPQUFPMEcsTUFBTSxHQUFERixPQUFJMUgsS0FBS21ILFNBQVEsVUFBVSxDQUFFRCxRQUFTbEgsS0FBS29ILFdBQ3BEUyxNQUFLLFNBQUNSLEdBQUcsT0FBS25HLEVBQUs0RyxlQUFlVCxFQUFJLEdBQzNDLEdBQUMsQ0FBQS9HLElBQUEsVUFBQUMsTUFFRCxTQUFBd0gsR0FBd0IsSUFBQTFDLEVBQUEsS0FBZDdFLEVBQUl1SCxFQUFKdkgsS0FBTTZCLEVBQUkwRixFQUFKMUYsS0FDZCxPQUFPdUYsTUFBTSxHQUFERixPQUFJMUgsS0FBS21ILFNBQVEsVUFBVSxDQUNyQ2EsT0FBUSxPQUNSZCxRQUFTbEgsS0FBS29ILFNBQ2RhLEtBQU1DLEtBQUtDLFVBQVUsQ0FBRTNILEtBQUFBLEVBQU02QixLQUFBQSxNQUM1QndGLE1BQUssU0FBQ1IsR0FBRyxPQUFLaEMsRUFBS3lDLGVBQWVULEVBQUksR0FDM0MsR0FBQyxDQUFBL0csSUFBQSxhQUFBQyxNQUVELFNBQVc2SCxHQUFRLElBQUFDLEVBQUEsS0FDakIsT0FBT1QsTUFBTSxHQUFERixPQUFJMUgsS0FBS21ILFNBQVEsV0FBQU8sT0FBVVUsR0FBVSxDQUMvQ0osT0FBUSxTQUNSZCxRQUFTbEgsS0FBS29ILFdBQ2JTLE1BQUssU0FBQ1IsR0FBRyxPQUFLZ0IsRUFBS1AsZUFBZVQsRUFBSSxHQUMzQyxHQUFDLENBQUEvRyxJQUFBLFVBQUFDLE1BRUQsU0FBUTZILEdBQVEsSUFBQUUsRUFBQSxLQUNkLE9BQU9WLE1BQU0sR0FBREYsT0FBSTFILEtBQUttSCxTQUFRLFdBQUFPLE9BQVVVLEVBQU0sVUFBVSxDQUNyREosT0FBUSxNQUNSZCxRQUFTbEgsS0FBS29ILFdBQ2JTLE1BQUssU0FBQ1IsR0FBRyxPQUFLaUIsRUFBS1IsZUFBZVQsRUFBSSxHQUMzQyxHQUFDLENBQUEvRyxJQUFBLGFBQUFDLE1BRUQsU0FBVzZILEdBQVEsSUFBQUcsRUFBQSxLQUNqQixPQUFPWCxNQUFNLEdBQURGLE9BQUkxSCxLQUFLbUgsU0FBUSxXQUFBTyxPQUFVVSxFQUFNLFVBQVUsQ0FDckRKLE9BQVEsU0FDUmQsUUFBU2xILEtBQUtvSCxXQUNiUyxNQUFLLFNBQUNSLEdBQUcsT0FBS2tCLEVBQUtULGVBQWVULEVBQUksR0FDM0MsR0FBQyxDQUFBL0csSUFBQSxhQUFBQyxNQUVELFNBQVdpSSxHQUFRLElBQUFDLEVBQUEsS0FDakIsT0FBT2IsTUFBTSxHQUFERixPQUFJMUgsS0FBS21ILFNBQVEsb0JBQW9CLENBQy9DYSxPQUFRLFFBQ1JkLFFBQVNsSCxLQUFLb0gsU0FDZGEsS0FBTUMsS0FBS0MsVUFBVSxDQUFDSyxPQUFBQSxNQUNyQlgsTUFBSyxTQUFDUixHQUFHLE9BQUtvQixFQUFLWCxlQUFlVCxFQUFJLEdBQzNDLEdBQUMsQ0FBQS9HLElBQUEsY0FBQUMsTUFFRCxXQUFjLElBQUFtSSxFQUFBLEtBQ1osT0FBT2QsTUFBTSxHQUFERixPQUFJMUgsS0FBS21ILFNBQVEsYUFBYSxDQUFFRCxRQUFTbEgsS0FBS29ILFdBQ3ZEUyxNQUFLLFNBQUNSLEdBQUcsT0FBS3FCLEVBQUtaLGVBQWVULEVBQUksR0FDM0MsR0FBQyxDQUFBL0csSUFBQSxjQUFBQyxNQUVELFNBQUFvSSxHQUE2QixJQUFBQyxFQUFBLEtBQWZwSSxFQUFJbUksRUFBSm5JLEtBQU1FLEVBQUtpSSxFQUFMakksTUFDbEIsT0FBT2tILE1BQU0sR0FBREYsT0FBSTFILEtBQUttSCxTQUFRLGFBQWEsQ0FDeENhLE9BQVEsUUFDUmQsUUFBU2xILEtBQUtvSCxTQUNkYSxLQUFNQyxLQUFLQyxVQUFVLENBQUUzSCxLQUFNQSxFQUFNRSxNQUFPQSxNQUN6Q21ILE1BQUssU0FBQ1IsR0FBRyxPQUFLdUIsRUFBS2QsZUFBZVQsRUFBSSxHQUMzQyxNLG9FQUFDTCxDQUFBLENBbkVxQixHLHVxQkNBSDZCLEVBQWEsV0FDaEMsU0FBQUEsRUFBWUMsRUFBUUMsSSw0RkFBYWhKLENBQUEsS0FBQThJLEdBQy9CN0ksS0FBS2dKLGVBQWlCRixFQUFPRyxjQUM3QmpKLEtBQUtrSixzQkFBd0JKLEVBQU9LLHFCQUNwQ25KLEtBQUtvSixxQkFBdUJOLEVBQU9PLG9CQUNuQ3JKLEtBQUtzSixpQkFBbUJSLEVBQU9TLGdCQUMvQnZKLEtBQUt3SixZQUFjVixFQUFPVyxXQUMxQnpKLEtBQUswSixhQUFlWCxFQUNwQi9JLEtBQUtvRyxXQUFhdUQsTUFBTUMsS0FBSzVKLEtBQUswSixhQUFhckQsaUJBQWlCckcsS0FBS2dKLGlCQUNyRWhKLEtBQUs2SixlQUFpQmQsRUFBWTVJLGNBQWNILEtBQUtrSix1QkFDckRsSixLQUFLOEosbUJBQXFCOUosS0FBSzhKLG1CQUFtQkMsS0FBSy9KLEtBQ3pELEMsUUF1REMsTyxFQXZEQTZJLEcsRUFBQSxFQUFBdkksSUFBQSxrQkFBQUMsTUFFRCxTQUFnQnlKLEdBQ2QsSUFBTUMsRUFBZWpLLEtBQUswSixhQUFhdkosY0FBYyxJQUFEdUgsT0FBS3NDLEVBQWFFLEdBQUUsV0FDeEVGLEVBQWF0SSxVQUFVQyxJQUFJM0IsS0FBS3NKLGtCQUNoQ1csRUFBYXhKLFlBQWN1SixFQUFhRyxrQkFDeENGLEVBQWF2SSxVQUFVQyxJQUFJM0IsS0FBS3dKLFlBQ2xDLEdBQUMsQ0FBQWxKLElBQUEsa0JBQUFDLE1BRUQsU0FBZ0J5SixHQUNkLElBQU1DLEVBQWVqSyxLQUFLMEosYUFBYXZKLGNBQWMsSUFBRHVILE9BQUtzQyxFQUFhRSxHQUFFLFdBQ3hFRixFQUFhdEksVUFBVUssT0FBTy9CLEtBQUtzSixrQkFDbkNXLEVBQWF2SSxVQUFVSyxPQUFPL0IsS0FBS3dKLGFBQ25DUyxFQUFheEosWUFBYyxFQUM3QixHQUFDLENBQUFILElBQUEsc0JBQUFDLE1BRUQsU0FBb0J5SixHQUNsQkEsRUFBYUksU0FBU0MsTUFBUXJLLEtBQUtzSyxnQkFBZ0JOLEdBQWdCaEssS0FBS3VLLGdCQUFnQlAsRUFDMUYsR0FBQyxDQUFBMUosSUFBQSxxQkFBQUMsTUFFRCxTQUFtQmlLLEdBQ2JBLEVBQU16RixPQUFPMEYsUUFBUXpLLEtBQUtnSixrQkFDNUJoSixLQUFLMEssb0JBQW9CRixFQUFNekYsUUFDL0IvRSxLQUFLMksscUJBRVQsR0FBQyxDQUFBckssSUFBQSxxQkFBQUMsTUFFRCxXQUNFLElBQU1xSyxFQUFrQjVLLEtBQUtvRyxXQUFXcEQsTUFBSyxTQUFDZ0gsR0FBWSxPQUFNQSxFQUFhSSxTQUFTQyxLQUFLLElBQzNGckssS0FBSzZKLGVBQWVnQixTQUFXRCxFQUMvQjVLLEtBQUs2SixlQUFlbkksVUFBVW9KLE9BQU85SyxLQUFLb0oscUJBQXNCd0IsRUFDbEUsR0FBQyxDQUFBdEssSUFBQSxvQkFBQUMsTUFFRCxXQUFvQixJQUFBVyxFQUFBLEtBQ2xCbEIsS0FBS29HLFdBQVczQixTQUFRLFNBQUF1RixHQUN0QjlJLEVBQUtvSixnQkFBZ0JOLEVBQ3ZCLElBQ0FoSyxLQUFLMkssb0JBQ1AsR0FBQyxDQUFBckssSUFBQSxxQkFBQUMsTUFFRCxXQUNFUCxLQUFLMEosYUFBYWpHLGlCQUFpQixVQUFVLFNBQUMrRyxHQUM1Q0EsRUFBTTlELGdCQUNSLElBQ0ExRyxLQUFLMEosYUFBYWpHLGlCQUFpQixRQUFTekQsS0FBSzhKLG9CQUNqRDlKLEtBQUswSixhQUFhakcsaUJBQWlCLFFBQVN6RCxLQUFLK0ssa0JBQWtCaEIsS0FBSy9KLE9BQ3hFQSxLQUFLMkssb0JBQ1AsR0FBQyxDQUFBckssSUFBQSxtQkFBQUMsTUFFRCxXQUNFUCxLQUFLK0Qsb0JBQ1AsR0FBQyxDQUFBekQsSUFBQSxjQUFBQyxNQUVELFdBQ0VQLEtBQUsrSyxtQkFDUCxNLG9FQUFDbEMsQ0FBQSxDQWxFK0IsR0NVckJtQyxFQUFjOUssU0FBU0MsY0FBYywwQkFDckM4SyxFQUFvQi9LLFNBQVNDLGNBQWMseUJBQzNDK0ssRUFBZ0JoTCxTQUFTQyxjQUFjLDZCLDBHQ2NwRCxJQUFNZ0wsRUFBTSxJQUFJbkUsRUFBSSxDQUNsQkMsUUFBUywrQ0FDVEMsUUFBUyxDQUNQa0UsY0FBZSx1Q0FDZixlQUFnQixzQkFLZEMsRUFBYSxJQUFJL0YsRUQzQlUsMEJDNEJqQytGLEVBQVdDLG9CQUtYLElBQU1DLEVBQVcsSUFBSTVMLEVEekNjLGlCQUNDLGtCQUNDLG9CQzZDL0I2TCxFQUFjLFNBQUNDLEdBQUcsT0FBS0MsUUFBUUMsSUFBSSxXQUFEakUsT0FBWStELEdBQU0sRUFHMURqRSxRQUFRb0UsSUFBSSxDQUFDVCxFQUFJVSxjQUFlVixFQUFJVyxhQUNqQ2pFLE1BQUssU0FBQWxILEdBQStCLEksSUFBQW9ILEcsRUFBQSxFLDRDQUFBcEgsSSxvMkJBQTdCb0wsRUFBWWhFLEVBQUEsR0FBRWlFLEVBQVNqRSxFQUFBLEdBQ3JCdkgsRUFBNkJ1TCxFQUE3QnZMLEtBQU1FLEVBQXVCcUwsRUFBdkJyTCxNQUFPOEgsRUFBZ0J1RCxFQUFoQnZELE9BQVExSCxFQUFRaUwsRUFBUmpMLElBQzdCeUssRUFBU1UsWUFBWSxDQUFFekwsS0FBQUEsRUFBTUUsTUFBQUEsSUFDN0I2SyxFQUFTVyxVQUFVMUQsR0FDbkIrQyxFQUFTWSxVQUFVckwsR0FFbkJzTCxFQUFTN0gsWUFBWXlILEVBQ3ZCLElBQ0NLLE1BQU1iLEdBSVQsSUFBTWMsRUFBYSxTQUFDbkwsR0FDbEIsSUFBTUMsRUFBU21LLEVBQVNnQixZQUNsQkMsRUFBTyxJQUFJeEwsRUFDZixDQUNFRyxLQUFNQSxFQUNOQyxPQUFRQSxFQUNSQyxnQkFBaUIsU0FBQ2IsRUFBTTZCLEdBQ3RCZ0osRUFBV29CLEtBQUtqTSxFQUFNNkIsRUFDeEIsRUFDQWYsaUJBQWtCLFNBQUM4RyxFQUFRc0UsR0FDekJDLEVBQWdCRixPQUNoQkUsRUFBZ0JDLGdCQUFlLFdBQzdCRCxFQUFnQkUsbUJBQWtCLEdBQ2xDMUIsRUFDRzJCLFdBQVcxRSxHQUNYUCxNQUFLLFdBQ0o2RSxJQUNBQyxFQUFnQjdILE9BQ2xCLElBQ0N1SCxNQUFNYixHQUNOdUIsU0FBUSxXQUNQSixFQUFnQkUsbUJBQWtCLEVBQ3BDLEdBQ0osR0FDRixFQUNBdEwsZ0JBQWlCLFNBQ2Y2RyxFQUNBNEUsRUFDQUMsRUFDQUMsRUFDQUMsR0FFSUgsRUFDRjdCLEVBQ0dpQyxXQUFXaEYsR0FDWFAsTUFBSyxTQUFDMUcsR0FDTGdNLEVBQWdCaE0sR0FDaEIrTCxHQUNGLElBQ0NiLE1BQU1iLEdBRVRMLEVBQ0c4QixRQUFRN0UsR0FDUlAsTUFBSyxTQUFDMUcsR0FDTGdNLEVBQWdCaE0sR0FDaEI4TCxHQUNGLElBQ0NaLE1BQU1iLEVBRWIsR0Q1RzBCLGtCQytHNUI2QixlQUNGLE9BQU9iLENBQ1QsRUFHTUosRUFBVyxJQUFJcEksRUFBUXNJLEVEckhJLG9CQ3VJM0JnQixFQUFlLElBQUl0SCxFRHJJVyxlQ3NIVixTQUFDdUgsR0FDekJELEVBQWFULG1CQUFrQixHQUMvQjFCLEVBQ0djLFlBQVlzQixHQUNaMUYsTUFBSyxTQUFDMkYsR0FDTGpDLEVBQVNVLFlBQVksQ0FBRXpMLEtBQU1nTixFQUFLaE4sS0FBTUUsTUFBTzhNLEVBQUs5TSxRQUNwRDRNLEVBQWF4SSxPQUNmLElBQ0N1SCxNQUFNYixHQUNOdUIsU0FBUSxXQUNQTyxFQUFhVCxtQkFBa0IsRUFDakMsR0FDSixJQUlBUyxFQUFhaEMsb0JBR2IsSUFzQk1tQyxFQUFlLElBQUl6SCxFRDdKUSxlQzhJUCxTQUFDN0UsR0FDekJzTSxFQUFhWixtQkFBa0IsR0FDL0IxQixFQUNHdUMsUUFBUSxDQUFFbE4sS0FBTVcsRUFBS3dNLE1BQU90TCxLQUFNbEIsRUFBS1AsTUFDdkNpSCxNQUFLLFNBQUMyRSxHQUNMSixFQUFTMUgsUUFBUTRILEVBQVdFLElBQzVCaUIsRUFBYTNJLE9BQ2YsSUFDQ3VILE1BQU1iLEdBQ051QixTQUFRLFdBQ1BVLEVBQWFaLG1CQUFrQixFQUNqQyxHQUNKLElBSUFZLEVBQWFuQyxvQkFHYixJQU1NcUIsRUFBa0IsSUFBSTdGLEVEcktPLDJCQ3NLbkM2RixFQUFnQnJCLG9CQUloQixJQWVNc0MsRUFBa0IsSUFBSTVILEVENUxPLHNCQzZLVixTQUFIMkMsR0FBaUIsSUFBWHhILEVBQUl3SCxFQUFKeEgsS0FDMUJ5TSxFQUFnQmYsbUJBQWtCLEdBQ2xDMUIsRUFDRzBDLFdBQVcxTSxHQUNYMEcsTUFBSyxTQUFDMUcsR0FDTG9LLEVBQVNXLFVBQVUvSyxFQUFLcUgsUUFDeEJvRixFQUFnQjlJLE9BQ2xCLElBQ0N1SCxNQUFNYixHQUNOdUIsU0FBUSxXQUNQYSxFQUFnQmYsbUJBQWtCLEVBQ3BDLEdBQ0osSUFJQWUsRUFBZ0J0QyxvQkFHaEIsSUFjTXdDLEdBZHVCLFNBQUNoRixHQUM1QixJQUFNaUYsRUFBUTdOLFNBQVNtRyxpQkFBaUJ5QyxFQUFPa0YsY0FDekNGLEVBQWlCLENBQUMsRUFReEIsT0FOQUMsRUFBTXRKLFNBQVEsU0FBQ3dKLEdBQ2IsSUFBTUMsRUFBWSxJQUFJckYsRUFBY0MsRUFBUW1GLEdBQzVDSCxFQUFlRyxFQUFLRSxhQUFhLFNBQVdELEVBQzVDQSxFQUFVRSxpQkFBaUJ0RixFQUM3QixJQUVPZ0YsQ0FDVCxDQUd1Qk8sQ0R0TUQsQ0FDcEJMLGFBQWMsZUFDZC9FLGNBQWUsZ0JBQ2ZFLHFCQUFzQixzQkFDdEJFLG9CQUFxQiw4QkFDckJFLGdCQUFpQiwwQkFDakJFLFdBQVkseUJDbU1keUIsRUFBY3pILGlCQUFpQixTQS9DUixXQUNyQnFLLEdBQXdCLFFBQUVRLGNBQzFCYixFQUFhaEIsTUFDZixJQTZDQXhCLEVBQWtCeEgsaUJBQWlCLFNBMUVYLFdBQ3RCNkosRUFBYWlCLGVBQWVoRCxFQUFTTSxlQUNyQ2lDLEdBQTRCLFlBQUVRLGNBQzlCaEIsRUFBYWIsTUFDZixJQXVFQXpCLEVBQVl2SCxpQkFBaUIsU0FBUyxXQUNwQ3FLLEdBQTJCLFdBQUVRLGNBQzdCVixFQUFnQm5CLE1BQ2xCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBpbmZvU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZVVzZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWJvdXRVc2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpbmZvU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhclVzZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfTtcblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZVVzZXIudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXRVc2VyLnRleHRDb250ZW50XG4gICAgfTtcbiAgfTtcblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICB0aGlzLl9uYW1lVXNlci50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fYWJvdXRVc2VyLnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH07XG5cbiAgc2V0QXZhdGFyKHVybCkge1xuICAgIHRoaXMuX2F2YXRhclVzZXIuc3JjID0gdXJsO1xuICB9XG5cblxuICBzZXRVc2VySWQoX2lkKSB7XG4gICAgdGhpcy5fdXNlcklkID0gX2lkXG4gIH1cblxuICBnZXRVc2VySWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VzZXJJZDtcbiAgfVxufTtcblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgdXNlcklkLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZVRyYXNoQ2xpY2ssIGhhbmRsZUxpa2VDbGljayB9LCB0ZW1wbGF0ZVNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5faXNMaWtlZCA9IGRhdGEubGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZCk7XG4gICAgdGhpcy5fbGlrZUNvdW50ZXIgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlVHJhc2hDbGljayA9IGhhbmRsZVRyYXNoQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX190aXRsZScpO1xuICAgIHRoaXMuX2VsZW1lbnRQaG90byA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19waG90bycpO1xuICAgIHRoaXMuX2VsZW1lbnRMaWtlQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19saWtlLWNvdW50ZXInKTtcbiAgICB0aGlzLl9lbGVtZW50VHJhc2ggPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fdHJhc2gnKTtcbiAgICB0aGlzLl9lbGVtZW50TGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19saWtlJyk7XG5cbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAuY29udGVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19faXRlbScpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICB9O1xuXG4gIF9oYXNIaWRkZW5UcmFzaEJ0bigpIHtcbiAgICBpZiAodGhpcy5fdXNlcklkICE9PSB0aGlzLl9vd25lcklkKSB7XG4gICAgICB0aGlzLl9lbGVtZW50VHJhc2gucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgX2FkZExpa2UgPSAoKSA9PiB7XG4gICAgdGhpcy5fZWxlbWVudExpa2UuY2xhc3NMaXN0LmFkZCgnZWxlbWVudHNfX2xpa2VfYWN0aXZlJyk7XG4gICAgdGhpcy5faXNMaWtlZCA9IHRydWU7XG4gICAgdGhpcy5fZWxlbWVudExpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZUNvdW50ZXI7XG4gIH1cblxuICBfcmVtb3ZlTGlrZSA9ICgpID0+IHtcbiAgICB0aGlzLl9lbGVtZW50TGlrZS5jbGFzc0xpc3QucmVtb3ZlKCdlbGVtZW50c19fbGlrZV9hY3RpdmUnKTtcbiAgICB0aGlzLl9pc0xpa2VkID0gZmFsc2U7XG4gICAgdGhpcy5fZWxlbWVudExpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZUNvdW50ZXI7XG4gIH1cblxuICBfc2V0TGlrZXNDb3VudGVyID0gKGRhdGEpID0+IHtcbiAgICB0aGlzLl9saWtlQ291bnRlciA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICB9XG5cbiAgX3JlbW92ZUNhcmQgPSAoKSA9PiB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9oYW5kbGVDYXJkSW1hZ2VDbGljayA9ICgpID0+IHtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xuICB9XG5cbiAgX2hhbmRsZVRyYXNoSW1hZ2VDbGljayA9ICgpID0+IHtcbiAgICB0aGlzLl9oYW5kbGVUcmFzaENsaWNrKFxuICAgICAgdGhpcy5fY2FyZElkLFxuICAgICAgdGhpcy5fcmVtb3ZlQ2FyZFxuICAgICAgKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSW1hZ2VDbGljayA9ICgpID0+IHtcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soXG4gICAgICB0aGlzLl9jYXJkSWQsXG4gICAgICB0aGlzLl9pc0xpa2VkLFxuICAgICAgdGhpcy5fYWRkTGlrZSxcbiAgICAgIHRoaXMuX3JlbW92ZUxpa2UsXG4gICAgICB0aGlzLl9zZXRMaWtlc0NvdW50ZXJcbiAgICApO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnRQaG90by5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNhcmRJbWFnZUNsaWNrKTtcbiAgICB0aGlzLl9lbGVtZW50VHJhc2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVUcmFzaEltYWdlQ2xpY2spO1xuICAgIHRoaXMuX2VsZW1lbnRMaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlTGlrZUltYWdlQ2xpY2spO1xuXG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9lbGVtZW50UGhvdG8uYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9lbGVtZW50UGhvdG8uc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9lbGVtZW50TGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlQ291bnRlcjtcbiAgICB0aGlzLl9oYXNIaWRkZW5UcmFzaEJ0bigpO1xuXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2FkZExpa2UoKTtcbiAgICB9XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IocmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfTtcblxuXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xuICB9O1xuXG4gIHJlbmRlckl0ZW1zKHJlbmRlckl0ZW1zKSB7XG4gICAgcmVuZGVySXRlbXMucmV2ZXJzZSgpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuYWRkSXRlbSh0aGlzLl9yZW5kZXJlcihpdGVtKSk7XG4gICAgfSk7XG4gIH07XG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZScpO1xuICB9O1xuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2spO1xuICB9O1xuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXAucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlT3ZlcmxheUNsaWNrKTtcbiAgfTtcblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfTtcbiAgfTtcblxuICBfaGFuZGxlT3ZlcmxheUNsaWNrID0gKGV2dCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwIHx8XG4gICAgICBldnQudGFyZ2V0ID09PSB0aGlzLl9jbG9zZUJ1dHRvblxuICAgICkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH07XG59O1xuXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcGhvdG8nKTtcbiAgICB0aGlzLl9wb3B1cENhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3Bob3RvLWNhcHRpb24nKTtcbiAgfTtcblxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9wb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfTtcbn07XG5cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0Rm9ybUNhbGxiYWNrKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fc3VibWl0Rm9ybUNhbGxiYWNrID0gc3VibWl0Rm9ybUNhbGxiYWNrO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgICB0aGlzLl9idXR0b25Gb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24tc2F2ZScpO1xuICAgIHRoaXMuX2J1dHRvbkZvcm1UZXh0ID0gdGhpcy5fYnV0dG9uRm9ybS50ZXh0Q29udGVudDtcbiAgfTtcblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcbiAgfTtcblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fc3VibWl0Rm9ybUNhbGxiYWNrKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9O1xuXG4gIHNldFNhdmVCdXR0b25UZXh0KGlzU2F2aW5nKSB7XG4gICAgaWYgKGlzU2F2aW5nKSB7XG4gICAgICAgIHRoaXMuX2J1dHRvbkZvcm0udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uRm9ybS50ZXh0Q29udGVudCA9IHRoaXMuX2J1dHRvbkZvcm1UZXh0O1xuICAgICAgfTtcbiAgfTtcblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9O1xufTtcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRGb3JtQ2FsbGJhY2spIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdWJtaXRGb3JtQ2FsbGJhY2sgPSBzdWJtaXRGb3JtQ2FsbGJhY2s7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgdGhpcy5fYnV0dG9uRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uLXNhdmUnKTtcbiAgICB0aGlzLl9idXR0b25Gb3JtVGV4dCA9IHRoaXMuX2J1dHRvbkZvcm0udGV4dENvbnRlbnQ7XG4gIH07XG5cbiAgc3VibWl0Q2FsbGJhY2socmVtb3ZpbmcpIHtcbiAgICB0aGlzLl9zdWJtaXRGb3JtQ2FsbGJhY2sgPSByZW1vdmluZztcbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fc3VibWl0Rm9ybUNhbGxiYWNrKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgc2V0U2F2ZUJ1dHRvblRleHQoaXNTYXZpbmcpIHtcbiAgICBpZiAoaXNTYXZpbmcpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uRm9ybS50ZXh0Q29udGVudCA9ICfQo9C00LDQu9C10L3QuNC1Li4uJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2J1dHRvbkZvcm0udGV4dENvbnRlbnQgPSB0aGlzLl9idXR0b25Gb3JtVGV4dDtcbiAgICAgIH07XG4gIH07XG5cbn07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9O1xuXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfVxuICB9O1xuXG4gIGdldEl0ZW1zKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcbiAgfTtcblxuICBzZXRJdGVtKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICB9O1xuXG4gIGRlbGV0ZUl0ZW0oY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICB9O1xuXG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICB9O1xuXG4gIGRlbGV0ZUxpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICB9O1xuXG4gIGVkaXRBdmF0YXIoYXZhdGFyKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHthdmF0YXJ9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XG4gIH07XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICB9O1xuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZTogbmFtZSwgYWJvdXQ6IGFib3V0IH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcbiAgfTtcblxufTtcblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybUlucHV0c0hhbmRsZXIgPSB0aGlzLl9mb3JtSW5wdXRzSGFuZGxlci5iaW5kKHRoaXMpO1xuICB9O1xuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH07XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9O1xuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkID8gdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSA6IHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gIH07XG5cbiAgX2Zvcm1JbnB1dHNIYW5kbGVyKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKHRoaXMuX2lucHV0U2VsZWN0b3IpKSB7XG4gICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoZXZlbnQudGFyZ2V0KTtcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfTtcbiAgfTtcblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgY29uc3QgaGFzSW52YWxpZElucHV0ID0gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGhhc0ludmFsaWRJbnB1dDtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC50b2dnbGUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcywgaGFzSW52YWxpZElucHV0KTtcbiAgfTtcblxuICBfcmVzZXRGb3JtSGFuZGxlcigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB0aGlzLl9mb3JtSW5wdXRzSGFuZGxlcik7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCB0aGlzLl9yZXNldEZvcm1IYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9O1xuXG4gIHJlc2V0RXJyb3JzKCkge1xuICAgIHRoaXMuX3Jlc2V0Rm9ybUhhbmRsZXIoKTtcbiAgfTtcbn07XG4iLCJleHBvcnQgY29uc3QgcHJvZmlsZU5hbWVTZWxlY3RvciA9ICcucHJvZmlsZV9fbmFtZSc7XG5leHBvcnQgY29uc3QgcHJvZmlsZUFib3V0U2VsZWN0b3IgPSAnLnByb2ZpbGVfX2Fib3V0JztcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyU2VsZWN0b3IgPSAnLnByb2ZpbGVfX2F2YXRhcic7XG5leHBvcnQgY29uc3QgY29udGFpbmVyU2VsZWN0b3IgPSAnLmVsZW1lbnRzX19jYXJkcyc7XG5leHBvcnQgY29uc3QgdGVtcGxhdGVTZWxlY3RvciA9ICcjY2FyZC10ZW1wbGF0ZSc7XG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlU2VsZWN0b3IgPSAnLnBvcHVwX2VkaXQnXG5leHBvcnQgY29uc3QgcG9wdXBBdmF0YXJTZWxlY3RvciA9ICcucG9wdXBfZWRpdC1hdmF0YXInO1xuZXhwb3J0IGNvbnN0IHBvcHVwSXRlbVNlbGVjdG9yID0gJy5wb3B1cF9pdGVtJztcbmV4cG9ydCBjb25zdCBwb3B1cFZpZXdTZWxlY3RvciA9ICcucG9wdXBfaXRlbV9waG90by12aWV3JztcbmV4cG9ydCBjb25zdCBwb3B1cERlbGV0ZVNlbGVjdG9yID0gJy5wb3B1cF9pdGVtX2RlbGV0ZS1jYXJkJztcbmV4cG9ydCBjb25zdCBhdmF0YXJCbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItYmxvY2snKTtcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24tZWRpdCcpO1xuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbkNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uLWFkZC1pdGVtJyk7XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbi1zYXZlJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b24tc2F2ZV9kaXNhYmxlZCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJ1xufTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQge1xuICBjb25maWcsXG4gIGNvbnRhaW5lclNlbGVjdG9yLFxuICB0ZW1wbGF0ZVNlbGVjdG9yLFxuICBwb3B1cFZpZXdTZWxlY3RvcixcbiAgcG9wdXBQcm9maWxlU2VsZWN0b3IsXG4gIHBvcHVwSXRlbVNlbGVjdG9yLFxuICBwb3B1cEF2YXRhclNlbGVjdG9yLFxuICBwb3B1cERlbGV0ZVNlbGVjdG9yLFxuICBwcm9maWxlTmFtZVNlbGVjdG9yLFxuICBwcm9maWxlQWJvdXRTZWxlY3RvcixcbiAgcHJvZmlsZUF2YXRhclNlbGVjdG9yLFxuICBlZGl0QnV0dG9uUHJvZmlsZSxcbiAgYXZhdGFyQmxvY2ssXG4gIGFkZEJ1dHRvbkNhcmQsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02My9cIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiNTMyMjVhNzktODA4Yy00NTAyLWFmOTgtNzYwODlkZGEzMjZjXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuLy8g0KHQvtC30LTQsNGR0Lwg0Y3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRg9Cy0LXQu9C40YfQtdC90L3QvtC5INGE0L7RgtC+0LPRgNCw0YTQuNC4XG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwVmlld1NlbGVjdG9yKTtcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG5cbi8vINCY0L3RhNC+0YDQvNCw0YbQuNGPINC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXG4gIHByb2ZpbGVOYW1lU2VsZWN0b3IsXG4gIHByb2ZpbGVBYm91dFNlbGVjdG9yLFxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3Jcbik7XG4vLyDQmNC90YTQvtGA0LzQsNGG0LjRjyDQvtCxINC+0YjQuNCx0LrQsNGFINGBINGB0LXRgNCy0LXRgNCwXG5jb25zdCBoYW5kbGVFcnJvciA9IChlcnIpID0+IGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xuXG4vLyDQktGL0L/QvtC70L3Rj9C10Lwg0LfQsNC/0YDQvtGB0Ysg0Log0YHQtdGA0LLQtdGA0YNcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEl0ZW1zKCldKVxuICAudGhlbigoW3VzZXJJbmZvRGF0YSwgaXRlbXNEYXRhXSkgPT4ge1xuICAgIGNvbnN0IHsgbmFtZSwgYWJvdXQsIGF2YXRhciwgX2lkIH0gPSB1c2VySW5mb0RhdGE7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KTtcbiAgICB1c2VySW5mby5zZXRBdmF0YXIoYXZhdGFyKTtcbiAgICB1c2VySW5mby5zZXRVc2VySWQoX2lkKTtcblxuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGl0ZW1zRGF0YSk7XG4gIH0pXG4gIC5jYXRjaChoYW5kbGVFcnJvcik7XG5cblxuLy/QodC+0LfQtNCw0L3QuNC1INC60LDRgNGC0L7Rh9C60LhcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCB1c2VySWQgPSB1c2VySW5mby5nZXRVc2VySWQoKTtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIGRhdGE6IGRhdGEsXG4gICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKG5hbWUsIGxpbmspID0+IHtcbiAgICAgICAgcG9wdXBJbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZVRyYXNoQ2xpY2s6IChjYXJkSWQsIHJlbW92ZUNhcmQpID0+IHtcbiAgICAgICAgcG9wdXBEZWxldGVDYXJkLm9wZW4oKTtcbiAgICAgICAgcG9wdXBEZWxldGVDYXJkLnN1Ym1pdENhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgICBwb3B1cERlbGV0ZUNhcmQuc2V0U2F2ZUJ1dHRvblRleHQodHJ1ZSk7XG4gICAgICAgICAgYXBpXG4gICAgICAgICAgICAuZGVsZXRlSXRlbShjYXJkSWQpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgIHJlbW92ZUNhcmQoKTtcbiAgICAgICAgICAgICAgcG9wdXBEZWxldGVDYXJkLmNsb3NlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGhhbmRsZUVycm9yKVxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICBwb3B1cERlbGV0ZUNhcmQuc2V0U2F2ZUJ1dHRvblRleHQoZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZUxpa2VDbGljazogKFxuICAgICAgICBjYXJkSWQsXG4gICAgICAgIGlzTGlrZWQsXG4gICAgICAgIGFkZExpa2UsXG4gICAgICAgIHJlbW92ZUxpa2UsXG4gICAgICAgIHNldExpa2VzQ291bnRlclxuICAgICAgKSA9PiB7XG4gICAgICAgIGlmIChpc0xpa2VkKSB7XG4gICAgICAgICAgYXBpXG4gICAgICAgICAgICAuZGVsZXRlTGlrZShjYXJkSWQpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICBzZXRMaWtlc0NvdW50ZXIoZGF0YSk7XG4gICAgICAgICAgICAgIHJlbW92ZUxpa2UoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goaGFuZGxlRXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFwaVxuICAgICAgICAgICAgLmFkZExpa2UoY2FyZElkKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgc2V0TGlrZXNDb3VudGVyKGRhdGEpO1xuICAgICAgICAgICAgICBhZGRMaWtlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGhhbmRsZUVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9LFxuICAgIHRlbXBsYXRlU2VsZWN0b3JcbiAgKS5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmQ7XG59O1xuXG4vLyDQodC+0LfQtNCw0ZHQvCDRjdC60LfQtdC80L/Qu9GP0YAg0LrQu9Cw0YHRgdCwINC00LvRjyDRgdC/0LjRgdC60LAg0LrQsNGA0YLQvtGH0LXQulxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihjcmVhdGVDYXJkLCBjb250YWluZXJTZWxlY3Rvcik7XG5cbi8vINCk0YPQvdC60YbQuNGPLdC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7RhdGA0LDQvdC10L3QuNGPINC40LfQvNC10L3QtdC90LjQuSDQv9GA0L7RhNC40LvRj1xuY29uc3QgcHJvZmlsZUZvcm1TdWJtaXQgPSAoaW5mb0RhdGEpID0+IHtcbiAgcG9wdXBQcm9maWxlLnNldFNhdmVCdXR0b25UZXh0KHRydWUpO1xuICBhcGlcbiAgICAuc2V0VXNlckluZm8oaW5mb0RhdGEpXG4gICAgLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZTogdXNlci5uYW1lLCBhYm91dDogdXNlci5hYm91dCB9KTtcbiAgICAgIHBvcHVwUHJvZmlsZS5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKGhhbmRsZUVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwUHJvZmlsZS5zZXRTYXZlQnV0dG9uVGV4dChmYWxzZSk7XG4gICAgfSk7XG59O1xuXG4vLyDQktGB0L/Qu9GL0LLQsNGO0YnQtdC1INC+0LrQvdC+INGBINGE0L7RgNC80L7QuSDQtNC70Y8g0L/RgNC+0YTQuNC70Y9cbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwUHJvZmlsZVNlbGVjdG9yLCBwcm9maWxlRm9ybVN1Ym1pdCk7XG5wb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8g0KTRg9C90LrRhtC40Y8t0L7QsdGA0LDQsdC+0YLRh9C40Log0L3QsNC20LDRgtC40Y8g0L3QsCDQutC90L7Qv9C60YMg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xuY29uc3QgZWRpdEJ1dHRvbkNsaWNrID0gKCkgPT4ge1xuICBwb3B1cFByb2ZpbGUuc2V0SW5wdXRWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XG4gIGZvcm1WYWxpZGF0b3JzW1wiZWRpdFByb2ZpbGVcIl0ucmVzZXRFcnJvcnMoKTtcbiAgcG9wdXBQcm9maWxlLm9wZW4oKTtcbn07XG5cbi8vINCk0YPQvdC60YbQuNGPLdC+0LHRgNCw0LHQvtGC0YfQuNC6INC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgYWRkQ2FyZEZvcm1TdWJtaXQgPSAoZGF0YSkgPT4ge1xuICBwb3B1cEFkZENhcmQuc2V0U2F2ZUJ1dHRvblRleHQodHJ1ZSk7XG4gIGFwaVxuICAgIC5zZXRJdGVtKHsgbmFtZTogZGF0YS50aXRsZSwgbGluazogZGF0YS51cmwgfSlcbiAgICAudGhlbigoY2FyZCkgPT4ge1xuICAgICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGNhcmQpKTtcbiAgICAgIHBvcHVwQWRkQ2FyZC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKGhhbmRsZUVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwQWRkQ2FyZC5zZXRTYXZlQnV0dG9uVGV4dChmYWxzZSk7XG4gICAgfSk7XG59O1xuXG4vLyDQktGB0L/Qu9GL0LLQsNGO0YnQtdC1INC+0LrQvdC+INGBINGE0L7RgNC80L7QuSDQtNC70Y8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgcG9wdXBBZGRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBJdGVtU2VsZWN0b3IsIGFkZENhcmRGb3JtU3VibWl0KTtcbnBvcHVwQWRkQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyDQpNGD0L3QutGG0LjRjy3QvtCx0YDQsNCx0L7RgtGH0LjQuiDQvdCw0LbQsNGC0LjRjyDQvdCwINC60L3QvtC/0LrRgyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5jb25zdCBhZGRCdXR0b25DbGljayA9ICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbXCJpdGVtQWRkXCJdLnJlc2V0RXJyb3JzKCk7XG4gIHBvcHVwQWRkQ2FyZC5vcGVuKCk7XG59O1xuXG4vLyDQktGB0L/Qu9GL0LLQsNGO0YnQtdC1INC+0LrQvdC+INGBINGE0L7RgNC80L7QuSDQtNC70Y8g0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5jb25zdCBwb3B1cERlbGV0ZUNhcmQgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKHBvcHVwRGVsZXRlU2VsZWN0b3IpO1xucG9wdXBEZWxldGVDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuLy8g0KTRg9C90LrRhtC40Y8t0L7QsdGA0LDQsdC+0YLRh9C40Log0L7RgtC/0YDQsNCy0LrQuCDRhNC+0YDQvNGLINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0YLQsNGA0LBcbmNvbnN0IGF2YXRhckZvcm1TdWJtaXQgPSAoeyBkYXRhIH0pID0+IHtcbiAgcG9wdXBBdmF0YXJFZGl0LnNldFNhdmVCdXR0b25UZXh0KHRydWUpO1xuICBhcGlcbiAgICAuZWRpdEF2YXRhcihkYXRhKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRBdmF0YXIoZGF0YS5hdmF0YXIpO1xuICAgICAgcG9wdXBBdmF0YXJFZGl0LmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBBdmF0YXJFZGl0LnNldFNhdmVCdXR0b25UZXh0KGZhbHNlKTtcbiAgICB9KTtcbn07XG5cbi8vINCS0YHQv9C70YvQstCw0Y7RidC10LUg0L7QutC90L4g0YEg0YTQvtGA0LzQvtC5INC00LvRjyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINCw0LLQsNGC0LDRgNCwXG5jb25zdCBwb3B1cEF2YXRhckVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEF2YXRhclNlbGVjdG9yLCBhdmF0YXJGb3JtU3VibWl0KTtcbnBvcHVwQXZhdGFyRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyDQpNGD0L3QutGG0LjRjyDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjQuCDQstCw0LvQuNC00LDRhtC40Lgg0YTQvtGA0LxcbmNvbnN0IGluaXRpYWxpemVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbiAgZm9ybXMuZm9yRWFjaCgoZm9ybSkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybSk7XG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbihjb25maWcpO1xuICB9KTtcblxuICByZXR1cm4gZm9ybVZhbGlkYXRvcnM7XG59O1xuXG4vLyDQmNC90LjRhtC40LDQu9C40LfQuNGA0YPQtdC8INCy0LDQu9C40LTQsNGG0LjRjiDRhNC+0YDQvFxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSBpbml0aWFsaXplVmFsaWRhdGlvbihjb25maWcpO1xuXG4vLyDQlNC+0LHQsNCy0LvRj9C10Lwg0YHQu9GD0YjQsNGC0LXQu9C4INC90LAg0LrQvdC+0L/QutC4XG5hZGRCdXR0b25DYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhZGRCdXR0b25DbGljayk7XG5lZGl0QnV0dG9uUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZWRpdEJ1dHRvbkNsaWNrKTtcbmF2YXRhckJsb2NrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzW1wiYXZhdGFyRWRpdFwiXS5yZXNldEVycm9ycygpO1xuICBwb3B1cEF2YXRhckVkaXQub3BlbigpO1xufSk7XG4iXSwibmFtZXMiOlsiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJpbmZvU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZVVzZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfYWJvdXRVc2VyIiwiX2F2YXRhclVzZXIiLCJrZXkiLCJ2YWx1ZSIsIm5hbWUiLCJ0ZXh0Q29udGVudCIsImFib3V0IiwiX3JlZiIsInVybCIsInNyYyIsIl9pZCIsIl91c2VySWQiLCJDYXJkIiwidGVtcGxhdGVTZWxlY3RvciIsIl90aGlzIiwiZGF0YSIsInVzZXJJZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZVRyYXNoQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJfZGVmaW5lUHJvcGVydHkiLCJfZWxlbWVudExpa2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJfaXNMaWtlZCIsIl9lbGVtZW50TGlrZUNvdW50ZXIiLCJfbGlrZUNvdW50ZXIiLCJyZW1vdmUiLCJsaWtlcyIsImxlbmd0aCIsIl9lbGVtZW50IiwiX2hhbmRsZUNhcmRDbGljayIsIl9uYW1lIiwibGluayIsIl9saW5rIiwiX2hhbmRsZVRyYXNoQ2xpY2siLCJfY2FyZElkIiwiX3JlbW92ZUNhcmQiLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2FkZExpa2UiLCJfcmVtb3ZlTGlrZSIsIl9zZXRMaWtlc0NvdW50ZXIiLCJfb3duZXJJZCIsIm93bmVyIiwic29tZSIsImxpa2UiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9nZXRUZW1wbGF0ZSIsIl9lbGVtZW50VGl0bGUiLCJfZWxlbWVudFBob3RvIiwiX2VsZW1lbnRUcmFzaCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUNhcmRJbWFnZUNsaWNrIiwiX2hhbmRsZVRyYXNoSW1hZ2VDbGljayIsIl9oYW5kbGVMaWtlSW1hZ2VDbGljayIsImFsdCIsIl9oYXNIaWRkZW5UcmFzaEJ0biIsIl9zZXRFdmVudExpc3RlbmVycyIsIlNlY3Rpb24iLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJyZXZlcnNlIiwiZm9yRWFjaCIsImFkZEl0ZW0iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJldnQiLCJjbG9zZSIsInRhcmdldCIsIl9wb3B1cCIsIl9jbG9zZUJ1dHRvbiIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVPdmVybGF5Q2xpY2siLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX3RoaXMyIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBDYXB0aW9uIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtQ2FsbGJhY2siLCJfc3VibWl0Rm9ybUNhbGxiYWNrIiwiX3BvcHVwRm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkZvcm0iLCJfYnV0dG9uRm9ybVRleHQiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlzU2F2aW5nIiwicmVzZXQiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJyZW1vdmluZyIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJjb25jYXQiLCJzdGF0dXMiLCJmZXRjaCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsIl9yZWYyIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJfdGhpczMiLCJfdGhpczQiLCJfdGhpczUiLCJhdmF0YXIiLCJfdGhpczYiLCJfdGhpczciLCJfcmVmMyIsIl90aGlzOCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIkFycmF5IiwiZnJvbSIsIl9idXR0b25FbGVtZW50IiwiX2Zvcm1JbnB1dHNIYW5kbGVyIiwiYmluZCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXZlbnQiLCJtYXRjaGVzIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwidG9nZ2xlIiwiX3Jlc2V0Rm9ybUhhbmRsZXIiLCJhdmF0YXJCbG9jayIsImVkaXRCdXR0b25Qcm9maWxlIiwiYWRkQnV0dG9uQ2FyZCIsImFwaSIsImF1dGhvcml6YXRpb24iLCJwb3B1cEltYWdlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ1c2VySW5mbyIsImhhbmRsZUVycm9yIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0SXRlbXMiLCJ1c2VySW5mb0RhdGEiLCJpdGVtc0RhdGEiLCJzZXRVc2VySW5mbyIsInNldEF2YXRhciIsInNldFVzZXJJZCIsImNhcmRMaXN0IiwiY2F0Y2giLCJjcmVhdGVDYXJkIiwiZ2V0VXNlcklkIiwiY2FyZCIsIm9wZW4iLCJyZW1vdmVDYXJkIiwicG9wdXBEZWxldGVDYXJkIiwic3VibWl0Q2FsbGJhY2siLCJzZXRTYXZlQnV0dG9uVGV4dCIsImRlbGV0ZUl0ZW0iLCJmaW5hbGx5IiwiaXNMaWtlZCIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwic2V0TGlrZXNDb3VudGVyIiwiZGVsZXRlTGlrZSIsImdlbmVyYXRlQ2FyZCIsInBvcHVwUHJvZmlsZSIsImluZm9EYXRhIiwidXNlciIsInBvcHVwQWRkQ2FyZCIsInNldEl0ZW0iLCJ0aXRsZSIsInBvcHVwQXZhdGFyRWRpdCIsImVkaXRBdmF0YXIiLCJmb3JtVmFsaWRhdG9ycyIsImZvcm1zIiwiZm9ybVNlbGVjdG9yIiwiZm9ybSIsInZhbGlkYXRvciIsImdldEF0dHJpYnV0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJpbml0aWFsaXplVmFsaWRhdGlvbiIsInJlc2V0RXJyb3JzIiwic2V0SW5wdXRWYWx1ZXMiXSwic291cmNlUm9vdCI6IiJ9